webpackJsonp([20],{"3Nnz":function(t,e){},"9iC0":function(t,e,a){t.exports=a.p+"static/img/bcb_demo.fbdfb3b.png"},L5nb:function(t,e,a){"use strict";var o={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("popup-header",{attrs:{"left-text":"银行卡认证","right-text":"下一步"},on:{"on-click-right":t.nextStep}}),t._v(" "),o("div",{staticStyle:{margin:"15px 10px",overflow:"hidden"}},[o("masker",{staticStyle:{"border-radius":"6px",height:"60px","line-height":"60px"},attrs:{color:"#faece9"}},[o("div",{staticClass:"m-title"},[t._v('\n                请上传持卡人为"'),o("span",{staticClass:"tips-BTitle"},[t._v(t._s(t.username))]),t._v('"的银行卡\n            ')])])],1),t._v(" "),o("div",{staticClass:"imgBox"},[o("img",{staticClass:"idDemo",attrs:{src:a("r+03")}}),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:"true"==t.show,expression:"show=='true'"}]},[o("VueImgInputer",{staticClass:"idCardImg",attrs:{theme:"light",accept:"image/*",imgSrc:t.bankCardFrontUrl,onChange:t.onChangeFront,maxSize:5242880,placeholder:"",noMask:"",size:"small"},model:{value:t.bankCardFrontImg,callback:function(e){t.bankCardFrontImg=e},expression:"bankCardFrontImg"}})],1),t._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:"success1"==t.show,expression:"show=='success1'"}],staticClass:"certifi_icon",attrs:{src:a("Vz9T")}}),t._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:"fail"==t.show,expression:"show=='fail'"}],staticClass:"certifi_icon",attrs:{src:a("kcYi")}})]),t._v(" "),o("div",{staticClass:"imgBox"},[o("img",{staticClass:"idDemo",attrs:{src:a("9iC0")}}),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:"true"==t.display,expression:"display=='true'"}]},[o("VueImgInputer",{staticClass:"idCardImg",attrs:{theme:"light",accept:"image/*",imgSrc:t.bankCardBackUrl,onChange:t.onChangeBack,maxSize:5242880,placeholder:"",noMask:"",size:"small"},model:{value:t.bankCardBackImg,callback:function(e){t.bankCardBackImg=e},expression:"bankCardBackImg"}})],1),t._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:"success2"==t.display,expression:"display=='success2'"}],staticClass:"certifi_icon",attrs:{src:a("Vz9T")}}),t._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:"fail"==t.display,expression:"display=='fail'"}],staticClass:"certifi_icon",attrs:{src:a("kcYi")}})]),t._v(" "),o("group",{directives:[{name:"show",rawName:"v-show",value:"success1"==t.show,expression:"show=='success1'"}],staticClass:"group"},[o("x-input",{attrs:{title:"银行卡号：",max:19,readonly:""},model:{value:t.bcNo,callback:function(e){t.bcNo=e},expression:"bcNo"}})],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("actionsheet",{attrs:{menus:t.menus,"show-cancel":""},on:{"on-click-menu-menu1":t.LoginOut},model:{value:t.showMenus,callback:function(e){t.showMenus=e},expression:"showMenus"}})],1)],1)},staticRenderFns:[]};e.a=o},MnzI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=g(a("bOdI")),n=g(a("ABCa")),s=g(a("63CM")),r=g(a("WZtS")),i=g(a("Msp2")),u=g(a("2sLL")),c=g(a("mzja")),d=g(a("rLAy")),h=g(a("rGqP")),l=g(a("XYix")),p=g(a("rHil")),f=g(a("pDNl")),m=a("E3TW");function g(t){return t&&t.__esModule?t:{default:t}}a("tCpz"),e.default={directives:{TransferDom:s.default},data:function(){var t;return t={show:!1,menus:{menu1:"退出登录"},showMenus:!1,username:"username",bankCardFrontImg:"",bankCardFrontUrl:"./static/imgs/photo_icon.png",bankCardBackImg:"",bankCardBackUrl:"./static/imgs/photo_icon.png",display:"true"},(0,o.default)(t,"show","true"),(0,o.default)(t,"bcNo",""),t},created:function(){this.infoCheck(),this.getData()},components:{XHeader:n.default,PopupHeader:r.default,Actionsheet:i.default,XButton:u.default,Alert:c.default,Toast:d.default,Divider:h.default,Masker:l.default,Group:p.default,XInput:f.default},methods:{infoCheck:function(){var t=this,e=this;this.$axios({method:"post",url:m.httpUrl.informationCheck}).then(function(a){console.log(a.data);var o=a.data.retData;if(200==a.data.errCode){var n=o.person,s=o.bank;if(0==n)return void t.$vux.alert.show({title:"错误提示",content:"未实名认证，请先实名认证",onHide:function(){e.$router.push("/certification")}});1==s&&t.$vux.alert.show({title:"错误提示",content:"银行卡已验证！",onHide:function(){e.$router.push("/credit_info_list")}})}else 201==a.data.errCode?t.$vux.toast.show({type:"warn",text:a.data.retMsg}):401==a.data.errCode&&t.$vux.alert.show({title:"错误提示",content:"未登录，请先登录",onHide:function(){e.$router.push("/quick_login")}})}).catch(function(){this.$vux.toast.show({text:"网络异常，请稍后再试",type:"warn"})})},getData:function(){var t=this,e=this,a=this.$qs.stringify({page:1});this.$axios({method:"post",url:m.httpUrl.userInformation,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:a}).then(function(a){console.log(a.data),200==a.data.errCode?t.username=a.data.retData.name:201==a.data.errCode?t.$vux.toast.show({text:a.data.retMsg}):401==a.data.errCode&&t.$vux.alert.show({title:"错误提示",content:"未登录，请先登录",onHide:function(){e.$router.push("/quick_login")}})}).catch(function(){this.$vux.toast.show({text:"网络异常，请稍后再试",type:"warn"})})},showPlugin:function(){this.$vux.alert.show({title:"错误提示",content:"请上传银行卡正面图片"})},showAlert:function(t){var e=this;this.$vux.confirm.show({title:"提示",content:t,cancelText:"取消",confirmText:"手动银行卡认证",onCancel:function(){},onConfirm:function(){e.$router.push("/bank_edit")}})},onChangeFront:function(t){var e=this,a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){var t=a.result,o=new Image;o.src=t,this.result.length<=102400?e.upLoadFrontImg(a.result,2):o.onload=function(){var t=e.compress(o);e.upLoadFrontImg(t,2)}}},onChangeBack:function(t){var e=this,a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){var t=a.result,o=new Image;o.src=t,this.result.length<=102400?e.upLoadBackImg(a.result,3):o.onload=function(){var t=e.compress(o);e.upLoadBackImg(t,3)}}},upLoadFrontImg:function(t,e){var a=this,o=this;this.$vux.loading.show({text:"正在上传..."});var n=this.$qs.stringify({typeid:e,image:t});this.$axios({method:"post",url:m.httpUrl.bankUploads,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:n}).then(function(t){console.log(t.data),a.$vux.loading.hide(),200==t.data.errCode?(a.$vux.toast.show({text:"上传成功",type:"success",time:2e3}),a.bcNo=t.data.retData.bank_number,a.show="success1"):201==t.data.errCode?(a.showAlert(t.data.retMsg),a.bankCardFrontImg=""):401==t.data.errCode&&a.$vux.alert.show({title:"错误提示",content:"未登录，请先登录",onHide:function(){o.$router.push("/quick_login")}})}).catch(function(){this.$vux.toast.show({text:"网络异常，请稍后再试",type:"warn"})})},upLoadBackImg:function(t,e){var a=this,o=this;this.$vux.loading.show({text:"正在上传..."});var n=this.$qs.stringify({typeid:e,image:t});this.$axios({method:"post",url:m.httpUrl.bankUploads,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:n}).then(function(t){console.log(t.data),a.$vux.loading.hide(),200==t.data.errCode?(a.$vux.toast.show({text:"上传成功",type:"success"}),a.display="success2"):201==t.data.errCode?(a.showAlert(t.data.retMsg),a.bankCardBackImg=""):401==t.data.errCode&&a.$vux.alert.show({title:"错误提示",content:"未登录，请先登录",onHide:function(){o.$router.push("/quick_login")}})}).catch(function(){this.$vux.toast.show({text:"网络异常，请稍后再试",type:"warn"})})},nextStep:function(){var t=this.$route.query.step_type,e=this.$route.query.orderid;this.isEmpty(this.bankCardFrontImg)?this.showPlugin():this.isEmpty(this.bankCardBackImg)?this.$vux.alert.show({title:"错误提示",content:"请上传银行卡反面图片"}):"1"==t?this.$router.push({path:"/bank_edit",query:{step_type:t,orderid:e}}):this.$router.push({path:"/bank_edit"})},goHandle:function(){this.$router.push("/handle_certification")},goHome:function(){this.$router.push("/home")},LoginOut:function(){var t=this;this.$axios({method:"post",url:m.httpUrl.loginOut,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(e){console.log(e.data),200==e.data.errCode?t.$router.push("/quick_login"):201==e.data.errCode&&t.$vux.toast.show({type:"warn",text:e.data.retMsg})}).catch(function(){this.$vux.toast.show({text:"网络异常，请稍后再试",type:"warn"})})}}}},adui:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=g(a("bOdI")),n=g(a("ABCa")),s=g(a("63CM")),r=g(a("WZtS")),i=g(a("Msp2")),u=g(a("2sLL")),c=g(a("mzja")),d=g(a("rLAy")),h=g(a("rGqP")),l=g(a("XYix")),p=g(a("rHil")),f=g(a("pDNl")),m=a("E3TW");function g(t){return t&&t.__esModule?t:{default:t}}a("tCpz"),e.default={directives:{TransferDom:s.default},data:function(){var t;return t={show:!1,menus:{menu1:"退出登录"},showMenus:!1,username:"username",bankCardFrontImg:"",bankCardFrontUrl:"./static/imgs/photo_icon.png",bankCardBackImg:"",bankCardBackUrl:"./static/imgs/photo_icon.png",display:"true"},(0,o.default)(t,"show","true"),(0,o.default)(t,"bcNo",""),t},created:function(){this.infoCheck(),this.getData()},components:{XHeader:n.default,PopupHeader:r.default,Actionsheet:i.default,XButton:u.default,Alert:c.default,Toast:d.default,Divider:h.default,Masker:l.default,Group:p.default,XInput:f.default},methods:{infoCheck:function(){var t=this,e=this;this.$axios({method:"post",url:m.httpUrl.informationCheck}).then(function(a){console.log(a.data);var o=a.data.retData;if(200==a.data.errCode){var n=o.person,s=o.bank;if(0==n)return void t.$vux.alert.show({title:"错误提示",content:"未实名认证，请先实名认证",onHide:function(){e.$router.push("/certification")}});1==s&&t.$vux.alert.show({title:"错误提示",content:"银行卡已验证！",onHide:function(){e.$router.push("/credit_info_list")}})}else 201==a.data.errCode?t.$vux.toast.show({type:"warn",text:a.data.retMsg}):401==a.data.errCode&&t.$vux.alert.show({title:"错误提示",content:"未登录，请先登录",onHide:function(){e.$router.push("/quick_login")}})}).catch(function(){this.$vux.toast.show({text:"网络异常，请稍后再试",type:"warn"})})},getData:function(){var t=this,e=this,a=this.$qs.stringify({page:1});this.$axios({method:"post",url:m.httpUrl.userInformation,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:a}).then(function(a){console.log(a.data),200==a.data.errCode?t.username=a.data.retData.name:201==a.data.errCode?t.$vux.toast.show({text:a.data.retMsg}):401==a.data.errCode&&t.$vux.alert.show({title:"错误提示",content:"未登录，请先登录",onHide:function(){e.$router.push("/quick_login")}})}).catch(function(){this.$vux.toast.show({text:"网络异常，请稍后再试",type:"warn"})})},showPlugin:function(){this.$vux.alert.show({title:"错误提示",content:"请上传银行卡正面图片"})},showAlert:function(t){var e=this;this.$vux.confirm.show({title:"提示",content:t,cancelText:"取消",confirmText:"手动银行卡认证",onCancel:function(){},onConfirm:function(){e.$router.push("/bank_edit")}})},onChangeFront:function(t){var e=this,a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){var t=a.result,o=new Image;o.src=t,this.result.length<=102400?e.upLoadFrontImg(a.result,2):o.onload=function(){var t=e.compress(o);e.upLoadFrontImg(t,2)}}},onChangeBack:function(t){var e=this,a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){var t=a.result,o=new Image;o.src=t,this.result.length<=102400?e.upLoadBackImg(a.result,3):o.onload=function(){var t=e.compress(o);e.upLoadBackImg(t,3)}}},upLoadFrontImg:function(t,e){var a=this,o=this;this.$vux.loading.show({text:"正在上传..."});var n=this.$qs.stringify({typeid:e,image:t});this.$axios({method:"post",url:m.httpUrl.bankUploads,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:n}).then(function(t){console.log(t.data),a.$vux.loading.hide(),200==t.data.errCode?(a.$vux.toast.show({text:"上传成功",type:"success",time:2e3}),a.bcNo=t.data.retData.bank_number,a.show="success1"):201==t.data.errCode?(a.showAlert(t.data.retMsg),a.bankCardFrontImg=""):401==t.data.errCode&&a.$vux.alert.show({title:"错误提示",content:"未登录，请先登录",onHide:function(){o.$router.push("/quick_login")}})}).catch(function(){this.$vux.toast.show({text:"网络异常，请稍后再试",type:"warn"})})},upLoadBackImg:function(t,e){var a=this,o=this;this.$vux.loading.show({text:"正在上传..."});var n=this.$qs.stringify({typeid:e,image:t});this.$axios({method:"post",url:m.httpUrl.bankUploads,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:n}).then(function(t){console.log(t.data),a.$vux.loading.hide(),200==t.data.errCode?(a.$vux.toast.show({text:"上传成功",type:"success"}),a.display="success2"):201==t.data.errCode?(a.showAlert(t.data.retMsg),a.bankCardBackImg=""):401==t.data.errCode&&a.$vux.alert.show({title:"错误提示",content:"未登录，请先登录",onHide:function(){o.$router.push("/quick_login")}})}).catch(function(){this.$vux.toast.show({text:"网络异常，请稍后再试",type:"warn"})})},nextStep:function(){var t=this.$route.query.step_type,e=this.$route.query.orderid;this.isEmpty(this.bankCardFrontImg)?this.showPlugin():this.isEmpty(this.bankCardBackImg)?this.$vux.alert.show({title:"错误提示",content:"请上传银行卡反面图片"}):"1"==t?this.$router.push({path:"/bank_edit",query:{step_type:t,orderid:e}}):this.$router.push({path:"/bank_edit"})},goHandle:function(){this.$router.push("/handle_certification")},goHome:function(){this.$router.push("/home")},LoginOut:function(){var t=this;this.$axios({method:"post",url:m.httpUrl.loginOut,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(e){console.log(e.data),200==e.data.errCode?t.$router.push("/quick_login"):201==e.data.errCode&&t.$vux.toast.show({type:"warn",text:e.data.retMsg})}).catch(function(){this.$vux.toast.show({text:"网络异常，请稍后再试",type:"warn"})})}}}},mqDt:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("MnzI");a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);var s=a("adui"),r=a.n(s),i=a("L5nb");var u=function(t){a("3Nnz")},c=a("VU/8")(r.a,i.a,!1,u,"data-v-4ec5af8c",null);e.default=c.exports},"r+03":function(t,e,a){t.exports=a.p+"static/img/bcf_demo.0c11cc4.png"}});
//# sourceMappingURL=20.05283f256915be3f61dc.js.map