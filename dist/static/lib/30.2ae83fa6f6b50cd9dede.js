webpackJsonp([30],{"0gq/":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=u(o("ABCa")),n=u(o("WZtS")),s=u(o("Msp2")),i=u(o("63CM")),r=u(o("2sLL")),d=o("E3TW");function u(t){return t&&t.__esModule?t:{default:t}}e.default={directives:{TransferDom:i.default},data:function(){return{menus:{menu1:"退出登录"},showMenus:!1,height:document.documentElement.clientHeight-220+"px",option:{penColor:"rgb(0, 0, 0)",backgroundColor:"rgb(255,255,255)"},showToast:!1,showMask:!0,toastMsg:"",toastType:"",showLoading:!1,loadText:""}},created:function(){},components:{XHeader:a.default,PopupHeader:n.default,Actionsheet:s.default,XButton:r.default},methods:{save:function(){var t=this.$refs.signature.save();this.$refs.signature.save("image/jpeg");if(this.$refs.signature.isEmpty())return this.showToast=!0,this.toastMsg="您未签名，请先签名",void(this.toastType="warn");this.uploadSign(t)},clear:function(){this.$refs.signature.clear()},uploadSign:function(t){var e=this,o=this;this.showLoading=!0,this.loadText="正在保存签名，生成合同...";var a=this.$route.query.orderid,n=this.$qs.stringify({orderid:a,file:t,type:3});this.$axios({method:"post",url:d.httpUrl.signUpload,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:n}).then(function(t){console.log(t.data),e.showLoading=!1,e.loadText="",200==t.data.errCode?e.$vux.alert.show({title:"提示",content:"签名成功",onHide:function(){o.$router.push("/home")}}):201==t.data.errCode?(e.showToast=!0,e.toastMsg=t.data.retMsg,e.toastType="warn"):401==t.data.errCode&&e.$vux.alert.show({title:"错误提示",content:"未登录，请先登录",onHide:function(){o.$router.push("/quick_login")}})})},updatedata:function(){var t=this,e=this.$route.query.orderid,o=this,a=this.$qs.stringify({orderid:e,type:2,is_db_sign:1});this.$axios({method:"post",url:d.httpUrl.updatedata,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:a}).then(function(e){console.log(e.data),t.showLoading=!1,t.loadText="",200==e.data.errCode||(201==e.data.errCode?t.showAlert(e.data.retMsg):401==e.data.errCode&&t.$vux.alert.show({title:"错误提示",content:"未登录，请先登录",onHide:function(){o.$router.push("/quick_login")}}))})},getWxPayData:function(){var t=this,e=this,o=this.$route.query.orderid;console.log(o);var a=this.$qs.stringify({is_apple:1,orderid:o});this.$axios({method:"post",url:"http://ybuser.youxia.com/Pay/wxPay",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:a}).then(function(o){201==o.data.errCode?t.$vux.toast.show({type:"warn",text:o.data.retMsg}):e.weixinPay(JSON.parse(o.data))})},weixinPay:function(t){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.onBridgeReady(t),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.onBridgeReady(t)),document.attachEvent("onWeixinJSBridgeReady",this.onBridgeReady(t))):this.onBridgeReady(t)},onBridgeReady:function(t){var e=this.$route.query.step_type,o=this.$route.query.orderid,a=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg?a.$vux.toast.show({text:"支付成功",type:"success",onHide:function(){"1"==e?a.$router.push({path:"/verify_step",query:{orderid:o}}):a.$router.push("/home")}}):"get_brand_wcpay_request:fail"==t.err_msg&&a.$vux.toast.show({text:"支付失败"+t.err_msg,type:"warn",onHide:function(){a.$router.push("/home")}})})},LoginOut:function(){var t=this;this.$axios({method:"post",url:d.httpUrl.loginOut,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(e){console.log(e.data),200==e.data.errCode?t.$router.push("/quick_login"):201==e.data.errCode&&(t.showToast=!0,t.toastMsg=e.data.retMsg,t.toastType="warn")}).catch(function(){this.$vux.toast.show({text:"网络异常，请稍后再试",type:"warn"})})},goHome:function(){this.$router.push("/home")},goCreditInfoList:function(){this.$router.push("/credit_info_list")}}}},L9C9:function(t,e,o){"use strict";var a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"text-align":"center"}},[o("div",{staticClass:"btnBox"},[o("x-button",{staticClass:"clearBtn",attrs:{type:"warn",mini:""},nativeOn:{click:function(e){return t.clear(e)}}},[t._v("清 空")]),t._v(" "),o("x-button",{staticClass:"saveBtn",attrs:{type:"primary",mini:""},nativeOn:{click:function(e){return t.save(e)}}},[t._v("保 存")])],1),t._v(" "),o("p",{staticClass:"tips"},[t._v("注意：请使用正楷签名")]),t._v(" "),o("div",{staticClass:"vueSignatureBox"},[o("vueSignature",{ref:"signature",staticClass:"vueSignature",attrs:{sigOption:t.option,w:"100%",h:"100vh"}})],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("actionsheet",{attrs:{menus:t.menus,"show-cancel":""},on:{"on-click-menu-menu1":t.LoginOut},model:{value:t.showMenus,callback:function(e){t.showMenus=e},expression:"showMenus"}})],1),t._v(" "),o("loading",{staticClass:"loading",attrs:{show:t.showLoading,text:t.loadText}}),t._v(" "),o("toast",{staticClass:"toastMsg",attrs:{type:t.toastType,"is-show-mask":t.showMask},model:{value:t.showToast,callback:function(e){t.showToast=e},expression:"showToast"}},[t._v(t._s(t.toastMsg))])],1)},staticRenderFns:[]};e.a=a},Upej:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("imqS");o.n(a);for(var n in a)"default"!==n&&function(t){o.d(e,t,function(){return a[t]})}(n);var s=o("0gq/"),i=o.n(s),r=o("L9C9");var d=function(t){o("jK9+")},u=o("VU/8")(i.a,r.a,!1,d,"data-v-470fd8be",null);e.default=u.exports},imqS:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=u(o("ABCa")),n=u(o("WZtS")),s=u(o("Msp2")),i=u(o("63CM")),r=u(o("2sLL")),d=o("E3TW");function u(t){return t&&t.__esModule?t:{default:t}}e.default={directives:{TransferDom:i.default},data:function(){return{menus:{menu1:"退出登录"},showMenus:!1,height:document.documentElement.clientHeight-220+"px",option:{penColor:"rgb(0, 0, 0)",backgroundColor:"rgb(255,255,255)"},showToast:!1,showMask:!0,toastMsg:"",toastType:"",showLoading:!1,loadText:""}},created:function(){},components:{XHeader:a.default,PopupHeader:n.default,Actionsheet:s.default,XButton:r.default},methods:{save:function(){var t=this.$refs.signature.save();this.$refs.signature.save("image/jpeg");if(this.$refs.signature.isEmpty())return this.showToast=!0,this.toastMsg="您未签名，请先签名",void(this.toastType="warn");this.uploadSign(t)},clear:function(){this.$refs.signature.clear()},uploadSign:function(t){var e=this,o=this;this.showLoading=!0,this.loadText="正在保存签名，生成合同...";var a=this.$route.query.orderid,n=this.$qs.stringify({orderid:a,file:t,type:3});this.$axios({method:"post",url:d.httpUrl.signUpload,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:n}).then(function(t){console.log(t.data),e.showLoading=!1,e.loadText="",200==t.data.errCode?e.$vux.alert.show({title:"提示",content:"签名成功",onHide:function(){o.$router.push("/home")}}):201==t.data.errCode?(e.showToast=!0,e.toastMsg=t.data.retMsg,e.toastType="warn"):401==t.data.errCode&&e.$vux.alert.show({title:"错误提示",content:"未登录，请先登录",onHide:function(){o.$router.push("/quick_login")}})})},updatedata:function(){var t=this,e=this.$route.query.orderid,o=this,a=this.$qs.stringify({orderid:e,type:2,is_db_sign:1});this.$axios({method:"post",url:d.httpUrl.updatedata,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:a}).then(function(e){console.log(e.data),t.showLoading=!1,t.loadText="",200==e.data.errCode||(201==e.data.errCode?t.showAlert(e.data.retMsg):401==e.data.errCode&&t.$vux.alert.show({title:"错误提示",content:"未登录，请先登录",onHide:function(){o.$router.push("/quick_login")}}))})},getWxPayData:function(){var t=this,e=this,o=this.$route.query.orderid;console.log(o);var a=this.$qs.stringify({is_apple:1,orderid:o});this.$axios({method:"post",url:"http://ybuser.youxia.com/Pay/wxPay",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:a}).then(function(o){201==o.data.errCode?t.$vux.toast.show({type:"warn",text:o.data.retMsg}):e.weixinPay(JSON.parse(o.data))})},weixinPay:function(t){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.onBridgeReady(t),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.onBridgeReady(t)),document.attachEvent("onWeixinJSBridgeReady",this.onBridgeReady(t))):this.onBridgeReady(t)},onBridgeReady:function(t){var e=this.$route.query.step_type,o=this.$route.query.orderid,a=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg?a.$vux.toast.show({text:"支付成功",type:"success",onHide:function(){"1"==e?a.$router.push({path:"/verify_step",query:{orderid:o}}):a.$router.push("/home")}}):"get_brand_wcpay_request:fail"==t.err_msg&&a.$vux.toast.show({text:"支付失败"+t.err_msg,type:"warn",onHide:function(){a.$router.push("/home")}})})},LoginOut:function(){var t=this;this.$axios({method:"post",url:d.httpUrl.loginOut,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(e){console.log(e.data),200==e.data.errCode?t.$router.push("/quick_login"):201==e.data.errCode&&(t.showToast=!0,t.toastMsg=e.data.retMsg,t.toastType="warn")}).catch(function(){this.$vux.toast.show({text:"网络异常，请稍后再试",type:"warn"})})},goHome:function(){this.$router.push("/home")},goCreditInfoList:function(){this.$router.push("/credit_info_list")}}}},"jK9+":function(t,e){}});
//# sourceMappingURL=30.2ae83fa6f6b50cd9dede.js.map